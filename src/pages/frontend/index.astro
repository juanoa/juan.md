---
import { getCollection } from "astro:content";

// Get all chapters and find the first one
const allChapters = await getCollection("docs", ({ data, id }) => {
  return id.startsWith("frontend/") && !data.draft;
});

if (allChapters.length === 0) {
  return new Response("No chapters found", { status: 404 });
}

const sortedChapters = allChapters.sort(
  (a, b) => a.data.sidebar.order - b.data.sidebar.order
);

const firstChapter = sortedChapters[0];
const firstSlug = firstChapter.id.replace("frontend/", "").replace(/\.mdx?$/, "");

// Redirect to first chapter
return Astro.redirect(`/frontend/${firstSlug}`);
---
