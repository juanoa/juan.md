---
import type { CollectionEntry } from "astro:content";

interface Props {
  chapters: (CollectionEntry<"docs"> & { slug: string })[];
  currentSlug: string;
}

const { chapters, currentSlug } = Astro.props;
---

<div class="relative">
  <label for="chapter-select" class="sr-only">Select chapter</label>
  <select
    id="chapter-select"
    class="w-full px-4 py-3 pr-10 bg-white border border-[#ccc] rounded text-sm appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-black"
    onchange="window.location.href = this.value"
  >
    {
      chapters.map((chapter) => (
        <option
          value={`/frontend/${chapter.slug}`}
          selected={chapter.slug === currentSlug}
        >
          {chapter.data.sidebar.label || chapter.data.title}
        </option>
      ))
    }
  </select>
  <!-- Custom dropdown arrow -->
  <div class="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none">
    <svg
      class="w-4 h-4 text-black"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 9l-7 7-7-7"></path>
    </svg>
  </div>
</div>
